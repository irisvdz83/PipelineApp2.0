@page "/settings"
@using PipelineApp2._0.Controllers
@inject ISettingsController SettingsController
<link href="css/Settings.css" rel="stylesheet" />
<PageTitle>Settings</PageTitle>

<div style="display: flex; flex-direction: row;">
    <article style="width: 25%; position: relative;" class="greyBlock">
        <h4>Profile</h4>
        <p>Team Pipeline</p>
        <img alt="userPic" width="100" height="100" src="/images/Valentine-drawing-Sweepy.png" />
        <a href="#" style="position: absolute; bottom: 25px; right: 25px;"><img alt="editPicture" width="32" height="32" /></a>
    </article>
    <article style="width: 50%;" class="greyBlock">
        <form method="post">
            @Output
            <h4>Working schedule</h4>
            <div>
                <table cellspacing="3" cellpadding="3">
                    <tr>
                        <td>&nbsp;</td>
                        @foreach (var weekDay in SettingViewModel.WeekDays)
                        {
                            <td>
                                <center>
                                    <b>@weekDay.Name.Substring(0, 3)</b>
                                </center>
                            </td>
                        }
                        <td><b>Total</b></td>
                    </tr>
                    <tr>
                        <td>Working days</td>
                        @foreach (var weekDay in SettingViewModel.WeekDays)
                        {
                            <td>
                                <center>
                                    <input type="checkbox" @bind="weekDay.IsWorkDay" @bind:after="() => WeekDayChange(weekDay.Id)" />
                                </center>
                            </td>
                        }
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>Working hours</td>
                        @foreach (var weekDay in SettingViewModel.WeekDays)
                        {
                            <td>
                                <input type="number" @bind="weekDay.Hours" @bind:after="() => WeekDayChange(weekDay.Id)" />h
                                <input type="number" @bind="weekDay.Minutes" @bind:after="() => WeekDayChange(weekDay.Id)" />m
                            </td>
                        }
                        <td><b>@(TotalHours)h @(TotalMinutes)m</b></td>
                    </tr>
                </table>
            </div>
        </form>
    </article>
    <article style="width: 25%" class="greyBlock">
        <form method="post">
            <h4>Lunch breaks</h4>
            <div>
                <input type="checkbox" @bind="SettingViewModel.AddLunchBreaks" @bind:after="LunchBreakChange" />
                <input type="number" @bind="SettingViewModel.LunchBreakInMinutes" @bind:after="LunchBreakChange" /> minutes
            </div>
        </form>
    </article>
</div>
<div style="display: flex; flex-direction: row;">
    <article style="width: 25%;">
        <div style="display: flex; flex-direction: row;">
            <h4 style="margin-right: 10px;">Tags</h4>
            <a href="#" class="creationLink">Create new</a>
        </div>
        <div style="display: flex; flex-direction: column;">
            @foreach (var tag in SettingViewModel.Tags)
            {
                <div class="tag" style="background-color: @tag.Colour;">@tag.Name</div>
            }
        </div>
    </article>
    <article style="width: 75%;">
        <h4>Absence calendar</h4>
        <div>TODO</div>
    </article>

</div>





